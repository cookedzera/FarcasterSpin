<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArbCasino - Spin to Win</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'arbitrum-blue': '#28A0F0',
                        'dark-bg': '#0B0F1C',
                        'card-bg': '#1A1F2E',
                        'card-border': '#2A3441',
                        'neon-green': '#00FF88',
                        'neon-yellow': '#FFD700',
                        'text-secondary': '#8B9DC3'
                    },
                    fontFamily: {
                        'pixel': ['Press Start 2P', 'monospace'],
                        'sans': ['Inter', 'sans-serif']
                    },
                    animation: {
                        'spin-reel': 'spinReel 2s ease-out',
                        'pulse-neon': 'pulseNeon 2s infinite',
                        'bounce-win': 'bounceWin 0.6s ease-out',
                        'glow': 'glow 2s ease-in-out infinite alternate'
                    },
                    keyframes: {
                        spinReel: {
                            '0%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-200px)' },
                            '100%': { transform: 'translateY(0)' }
                        },
                        pulseNeon: {
                            '0%, 100%': { 
                                boxShadow: '0 0 20px #28A0F0, 0 0 40px #28A0F0, 0 0 60px #28A0F0',
                                transform: 'scale(1)'
                            },
                            '50%': { 
                                boxShadow: '0 0 30px #28A0F0, 0 0 60px #28A0F0, 0 0 90px #28A0F0',
                                transform: 'scale(1.05)'
                            }
                        },
                        bounceWin: {
                            '0%': { transform: 'scale(1) rotate(0deg)' },
                            '50%': { transform: 'scale(1.2) rotate(5deg)' },
                            '100%': { transform: 'scale(1) rotate(0deg)' }
                        },
                        glow: {
                            'from': { textShadow: '0 0 10px #28A0F0, 0 0 20px #28A0F0, 0 0 30px #28A0F0' },
                            'to': { textShadow: '0 0 20px #28A0F0, 0 0 30px #28A0F0, 0 0 40px #28A0F0' }
                        }
                    }
                }
            }
        };
    </script>
    <style>
        .neon-border {
            box-shadow: 0 0 10px #28A0F0, inset 0 0 10px rgba(40, 160, 240, 0.1);
        }
        .neon-text {
            text-shadow: 0 0 10px #28A0F0, 0 0 20px #28A0F0;
        }
        .slot-container {
            overflow: hidden;
            height: 80px;
        }
        .slot-reel {
            transition: transform 2s ease-out;
        }
        .winning-glow {
            animation: glow 1s ease-in-out infinite alternate;
        }
    </style>
</head>
<body class="bg-dark-bg text-white font-sans min-h-screen" style="width: 390px; margin: 0 auto;">
    <!-- @COMPONENT: AppContainer -->
    <div class="flex flex-col min-h-screen p-4 space-y-4">
        
        <!-- @COMPONENT: Header -->
        <header class="text-center py-4 border-b border-card-border">
            <h1 class="font-pixel text-arbitrum-blue text-xl neon-text mb-2">üé∞ ArbCasino</h1>
            <div class="flex items-center justify-center space-x-2 text-sm">
                <div class="w-3 h-3 bg-arbitrum-blue rounded-full animate-pulse"></div>
                <span class="text-arbitrum-blue font-medium">Arbitrum One Only</span>
            </div>
        </header>
        <!-- @END_COMPONENT: Header -->

        <!-- @COMPONENT: SpinWheel -->
        <div class="bg-card-bg rounded-xl border border-card-border neon-border p-6">
            <h2 class="font-pixel text-center text-neon-green text-lg mb-6 neon-text">üé° SPIN WHEEL</h2>
            
            <!-- Slot Machine Reels -->
            <div class="flex justify-center space-x-4 mb-6">
                <!-- @MAP: [0,1,2].map(index => ( -->
                <div class="slot-container bg-dark-bg rounded-lg border-2 border-arbitrum-blue w-20 h-20 flex items-center justify-center neon-border" data-slot-index="0">
                    <div class="slot-reel text-4xl" data-mock="true">üéØ</div>
                </div>
                <div class="slot-container bg-dark-bg rounded-lg border-2 border-arbitrum-blue w-20 h-20 flex items-center justify-center neon-border" data-slot-index="1">
                    <div class="slot-reel text-4xl" data-mock="true">üê∏</div>
                </div>
                <div class="slot-container bg-dark-bg rounded-lg border-2 border-arbitrum-blue w-20 h-20 flex items-center justify-center neon-border" data-slot-index="2">
                    <div class="slot-reel text-4xl" data-mock="true">ü™ô</div>
                </div>
                <!-- @END_MAP )) -->
            </div>

            <!-- Spin Button -->
            <div class="text-center">
                <button 
                    id="spinButton" 
                    class="bg-gradient-to-r from-arbitrum-blue to-blue-600 hover:from-blue-500 hover:to-arbitrum-blue text-white font-pixel text-lg px-8 py-4 rounded-xl border-2 border-arbitrum-blue neon-border transition-all duration-200 hover:scale-105 active:scale-95 hover:animate-pulse-neon"
                    data-event="click:handleSpin"
                    data-implementation="Should trigger slot machine animation and blockchain transaction">
                    üéØ SPIN TO WIN
                </button>
            </div>
        </div>
        <!-- @END_COMPONENT: SpinWheel -->

        <!-- @COMPONENT: SpinStatus -->
        <div class="bg-card-bg rounded-xl border border-card-border neon-border p-4">
            <div class="flex justify-between items-center mb-2">
                <span class="text-text-secondary">üî¢ Your Spins Today:</span>
                <span class="font-bold text-neon-green" data-bind="user.spinsUsed">1 / 2</span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-text-secondary">‚è∞ Resets in:</span>
                <span class="font-bold text-neon-yellow" data-bind="countdown.remaining">10h 42m</span>
            </div>
        </div>
        <!-- @END_COMPONENT: SpinStatus -->

        <!-- @COMPONENT: WinDisplay -->
        <div id="winDisplay" class="bg-gradient-to-r from-green-900 to-green-800 rounded-xl border-2 border-neon-green neon-border p-4 hidden" data-state="isWinning:boolean = false">
            <div class="text-center">
                <div class="text-neon-green font-pixel text-lg mb-2 animate-bounce-win">üéÅ YOU WON!</div>
                <div class="text-2xl font-bold text-white">
                    <span data-bind="winAmount">420</span> 
                    <span class="text-neon-green">PEPE</span> 
                    <span class="text-2xl">üê∏</span>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: WinDisplay -->

        <!-- @COMPONENT: LiveStats -->
        <div class="bg-card-bg rounded-xl border border-card-border neon-border p-4">
            <h3 class="font-pixel text-arbitrum-blue text-sm mb-3 neon-text">üìä LIVE STATS</h3>
            <div class="space-y-2">
                <div class="flex justify-between">
                    <span class="text-text-secondary">üî• Total Claims Today:</span>
                    <span class="font-bold text-neon-green" data-bind="stats.totalClaims">1,024</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-text-secondary">üìä Contract TXs Today:</span>
                    <span class="font-bold text-arbitrum-blue" data-bind="stats.contractTxs">839</span>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: LiveStats -->

        <!-- @COMPONENT: Leaderboard -->
        <div class="bg-card-bg rounded-xl border border-card-border neon-border p-4">
            <h3 class="font-pixel text-neon-yellow text-sm mb-3 neon-text">üèÜ LEADERBOARD</h3>
            <div class="space-y-2">
                <!-- @MAP: leaderboard.map((player, index) => ( -->
                <div class="flex justify-between items-center py-2 border-b border-card-border last:border-b-0" data-mock="true">
                    <div class="flex items-center space-x-2">
                        <span class="text-neon-yellow font-bold">1.</span>
                        <span class="text-sm font-mono">0xAb...C1F</span>
                    </div>
                    <span class="text-neon-green font-medium">4 spins</span>
                </div>
                <div class="flex justify-between items-center py-2 border-b border-card-border last:border-b-0" data-mock="true">
                    <div class="flex items-center space-x-2">
                        <span class="text-text-secondary font-bold">2.</span>
                        <span class="text-sm font-mono">0xD2...B12</span>
                    </div>
                    <span class="text-neon-green font-medium">3 wins</span>
                </div>
                <div class="flex justify-between items-center py-2 bg-arbitrum-blue bg-opacity-20 rounded px-2 -mx-2" data-mock="true">
                    <div class="flex items-center space-x-2">
                        <span class="text-arbitrum-blue font-bold">6.</span>
                        <span class="text-sm font-mono text-arbitrum-blue font-medium">You</span>
                    </div>
                    <span class="text-neon-green font-medium">2 wins</span>
                </div>
                <!-- @END_MAP )) -->
            </div>
        </div>
        <!-- @END_COMPONENT: Leaderboard -->

        <!-- @COMPONENT: Footer -->
        <footer class="text-center py-4 text-text-secondary text-xs">
            <div class="flex items-center justify-center space-x-2 mb-2">
                <div class="w-2 h-2 bg-neon-green rounded-full animate-pulse"></div>
                <span>Connected to Arbitrum One</span>
            </div>
            <p>Powered by Farcaster Mini Apps</p>
        </footer>
        <!-- @END_COMPONENT: Footer -->
    </div>
    <!-- @END_COMPONENT: AppContainer -->

    <script>
        // TODO: Implement blockchain interactions, state management, and real-time updates
        (function() {
            // Mock slot machine symbols
            const symbols = ['üéØ', 'üê∏', 'ü™ô', 'üíÄ', 'üåà', 'üçå'];
            
            // Mock spin functionality
            const spinButton = document.getElementById('spinButton');
            const winDisplay = document.getElementById('winDisplay');
            let isSpinning = false;
            
            function getRandomSymbol() {
                return symbols[Math.floor(Math.random() * symbols.length)];
            }
            
            function animateSlot(slotElement, finalSymbol, delay = 0) {
                setTimeout(() => {
                    // Simulate spinning animation
                    slotElement.style.transform = 'translateY(-200px)';
                    
                    setTimeout(() => {
                        slotElement.textContent = finalSymbol;
                        slotElement.style.transform = 'translateY(0)';
                    }, 1000);
                }, delay);
            }
            
            function checkWin(results) {
                // Simple win condition: all same or specific combinations
                return results[0] === results[1] && results[1] === results[2];
            }
            
            function showWin() {
                winDisplay.classList.remove('hidden');
                winDisplay.classList.add('animate-bounce-win');
                
                // Hide after 3 seconds
                setTimeout(() => {
                    winDisplay.classList.add('hidden');
                    winDisplay.classList.remove('animate-bounce-win');
                }, 3000);
            }
            
            spinButton.addEventListener('click', function() {
                if (isSpinning) return;
                
                isSpinning = true;
                this.disabled = true;
                this.textContent = 'üé≤ SPINNING...';
                
                const slots = document.querySelectorAll('.slot-reel');
                const results = [];
                
                // Animate each slot with different delays
                slots.forEach((slot, index) => {
                    const finalSymbol = getRandomSymbol();
                    results.push(finalSymbol);
                    animateSlot(slot, finalSymbol, index * 200);
                });
                
                // Check results after animation completes
                setTimeout(() => {
                    if (checkWin(results)) {
                        showWin();
                        // TODO: Trigger blockchain transaction for reward claim
                    }
                    
                    // Reset button
                    this.disabled = false;
                    this.textContent = 'üéØ SPIN TO WIN';
                    isSpinning = false;
                }, 2500);
            });
            
            // Mock countdown timer
            function updateCountdown() {
                const now = new Date();
                const tomorrow = new Date(now);
                tomorrow.setUTCDate(tomorrow.getUTCDate() + 1);
                tomorrow.setUTCHours(0, 0, 0, 0);
                
                const diff = tomorrow - now;
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                
                const countdownElement = document.querySelector('[data-bind="countdown.remaining"]');
                if (countdownElement) {
                    countdownElement.textContent = `${hours}h ${minutes}m`;
                }
            }
            
            // Update countdown every minute
            updateCountdown();
            setInterval(updateCountdown, 60000);
            
            // Add hover effects to cards
            const cards = document.querySelectorAll('.neon-border');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.boxShadow = '0 0 20px #28A0F0, inset 0 0 20px rgba(40, 160, 240, 0.2)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.boxShadow = '0 0 10px #28A0F0, inset 0 0 10px rgba(40, 160, 240, 0.1)';
                });
            });
        })();
    </script>
</body>
</html>